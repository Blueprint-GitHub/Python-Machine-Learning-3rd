Fundamentals of Data Visualization by Claus O. Wilke
2023.12.06 ~

https://github.com/clauswilke/dataviz/blob/master/time_series.Rmd
데이터 시각화 (Data visualization)의 규칙

# 데이터 시각화의 기본
1. 시각적 속성은 위치,형태,크기,색,선 굵기,선 유형 을 말하며
    위치,크기,색,선 굵기는 연속적 유형(float)에서 사용되지만
    형태(동그라미,네모,세모), 선 유형(실선, 점선)은 이산형 데이터만을 표현한다.
2. 데이터 값마다 단 하나의 시각적 속성 값이 대응되어야 한다.

# 그래프의 축과 스케일
3. X,Y축이 동일한 단위로 그려져 있으면 그래프의 가로 세로 비율을 동일하게(격자를 정사각형으로)
    만들어야 하며, 그렇지 않다면 데이터를 잘 표현할 수 있도록 비율을 다르게 해야한다.
4. 비율처럼 곱셈이나 나눗셈으로 얻은 값은 로그 스케일로 표시하면 자연스럽게 표시할 수 있으며
    데이터셋의 값이 들쭉날쭉할 때도 로그 스케일을 많이 사용한다.
5. 제곱근(root) 스케일은 적절한 위치에 눈금을 표기하는 것이 까다롭지만 제곱으로 얻은 데이터(땅의 면적)를
    그래프로 표기하기에 적합하다.
6. 극 좌표계(polar coordinate system)는 축이 원형을 이루는 좌표계로 특정 기간에 생성되는 데이터를
    표기하는데 유용하다(1년 동안의 기온을 극 좌표계에 그리면 계절별 온도 편차가 큰 지역과 작은 지역을
    한 눈에 파악할 수 있다).

# 색상 스케일
7. 데이터 시각화에서 색을 사용하는 경우는 세 가지다.
    1) 데이터 군을 서로 구분하기 위해
        정성적 색상 스케일(서로 다른 색상)을 사용한다. 한정된 색을 사용해 구분하며,
        나란히 있을때 유난히 튀는 색이 있거나 색상으로 순서가 정해져 있다는 인상을 줘서는 안된다.
        Okabe Ito, ColorBrewer Dark2, ggplot2 hue 등의 색상 스케일이 있다.
    2) 데이터 값을 나타내기 위해
        순차적 색상 스케일(진해지는 색상)을 사용한다. 기온, 속력, 소득과 같은
        정량적 데이터 값을 색으로 표현하기 위해 사용하며 색상 스케일을 이루는 색이 전체적으로
        균일하게 차이를 보여야 한다. 연한 하늘색부터 짙은 남색까지 하나의 색조로 표시하는 것을
        단색상 스케일(ColorBrewer Blues)이라고 하고, 여러 색조로 이루어진 것을 다색상 스케일(Viridis)이라고 한다.
        경우에 따라서는 0 혹은 50%를 기준으로 양수, 음수를 색상으로 구분해야 할때도 있는데 이때 사용하는
        색상 스케일을 발산형 색상 스케일(CARTO Eath, Blue-Red)이라고 한다.
    3) 데이터 값을 강조하기 위해
        색은 데이터의 특성 요소를 강조하기에 효과적인 요소이다. 내가 원하는 부분을 다른 부분과
        확실히 구분되는 강렬하고 선명한 색으로 사용하면 전달하고자 하는 내용을 더욱 쉽게 전달할 수 있다.
        이때 사용하는 색상 스케일을 강조 색상 스케일(Okabe Ito, ColorBrewer)이라고 한다.
        강조 스케일을 사용할때는 강조하고자 하는 부분이 더욱 두드러지게 하기 위해서
        다른 부분에 적용하는 기본 색을 은은하고 밋밋한 색상으로 해야한다.(나머지의 색을 없애는 것도 하나의 방법이다)

# 다양한 시각화 방식
8. 데이터를 시각화할 때 적절한 그래프와 차트를 사용하면 더욱 명확하게 내용을 전달할 수 있다.
    1) 수량의 시각화
        - 막대 그래프(묶은 막대, 누적 막대), 산점도 그래프, 히트맵(색으로 수량을 표시)
    2) 분포의 시각화
        - 히스토그램, 밀도 도표 : 분포 데이터를 가장 직관적으로 보여주지만 파라미터를 임의로 정해야 해서 유의해야 한다.
        - 누적 밀도 도표, QQ 도표 : 항상 데이터를 정확하게 보여주지만 의미를 파악하기가 까다롭다.
        - 박스플롯, 바이올린 도표, 스트립 차트, 시나 도표 : 여러 분포 값을 한 번에 나타내거나, 전반적인 변화 추이를 볼때 유용하다
        - 누적 히스토그램, 중첩 밀도 도표 : 분포 값의 개수가 적을 때 비교 분석을 하기에 좋지만, 누적 히스토그램은 피하는 것이 낫다.
        - 융기선 도표 : 바이올린 도표 대신 쓰기 좋으며 분포 값이 많거나, 시간의 흐름에 따라 분포가 변화할때 유용하다
    3) 비율의 시각화
        - 파이 차트 : 파이 차트는 각 데이터의 비율을 한 눈에 알아보기 쉽게 한다. 단일 데이터셋에 유용하다.
        - 막대 그래프(묶은 막대, 누적 막대) : 단일 데이터 셋에서 막대 그래프는 각 데이터의 비율을 쉽게 비교할 수 있게 하고,
                                            누적 막대 그래프나 묶은 막대 그래프는 여러 개의 비율 데이터셋을 다룰때 효과적이다.
        - 누적 밀도 도표 : 연속형 변수를 따라 비율이 달라지는 데이터를 나타내기에 좋다.
    4) X-y 관계로 나타내는 시각화
        - 산점도 : 하나의 정량적 변수를 다른 변수와 비교해 나타낼 때 쓰는 가장 대표적인 방식으로
                   변수가 3개일때는 크기를 추가한 버블 차트로 만들어 사용한다.
        - 밀도 등고선 : 데이터 포인트가 매우 많은 경우 산점도로 나타내면 점들이 겹쳐서 보기 어려우므로 이때는
                        등고선이나 2차원 상자, 육각형 상자를 사용하면 좋다.
        - 상관 곡선 : 시각화하려는 정량적 데이터가 두 가지 이상이라면, 상관곡선(correlogram)의 형태의 상관계수로 나타낼 수 있다.
        - 꺾은선 그래프 : x축의 데이터가 시간, 의약품 투여량처럼 엄밀하게 증가하는 수치인 경우에는 주로 꺾은선 그래프를 그린다.
    5) 지리공간 데이터의 시각화
        - 단계구분도 : 지리공간 데이터는 기본적으로 지도(map)위에 표시하며, 데이터를 기준으로 각기 다른 색을 칠해서
                       지역별 데이터 값을 시각화할 수 있다.
    6) 불확실성의 시각화
        - 오차 막대(error bar) : 추정하거나 측정한 데이터의 예상 값 범위를 나타내며, 예상 값 기준치에서 가로나 세로 방향으로
                                 확장하여 표시한다. 그 기준점은 점, 막대 등으로 표시할 수 있으며, 예상 범위의 신뢰도가
                                 다른점을 반영하여(보통 측정치와 가까울수록 높음) 단계별 오차 막대를 그릴수 있다.
        - (감은)눈 모양 도표 : 융기선 도표와 바이올린 도표의 신뢰 수준과 불확실성 분포 상태를 동시에 보여준다.
        - 신뢰 대역(confidence band) : 곡선 그래프에서의 오차 막대 역할이며 주어진 신뢰 수준 안에서 선이 지나갈 수 있는
                                       값의 범위를 나타내고, 오차 막대와 마찬가지로 단계별 신뢰 대역 도표를 그릴 수 있다.

# 수량 데이터의 시각화
9. 막대 도표를 활용해 수치의 크기를 표현할 때, 이름 레이블의 길이가 길어서 가로로 자리를 많이 차지하는 경우
   레이블을 기울여 표기할 수 있지만, 가로 막대 도표로 바꾸면 더욱 읽기 편하게 쓸 수 있다.
10. 기본적으로 범주에 순서가 없다면 오름차순이나 내림차순으로 정렬하여 표기해야 한다.
    그러나 연령별 구분처럼 순서가 있는 경우에는 그 순서를 지켜야 한다.
11. 여러개의 범주형 변수를 다룰때 묶은 막대를 사용하여 데이터를 시각화할 수 있다. 묶은 막대 도표는 한 번에
    많은 정보를 보여주는 만큼 헷갈리기도 쉽다. 따라서 적절한 x,y축을 선택해야하고 기본 막대 그래프를 여러개 그리는 것도 하나의 방법이다.
12. 인원 데이터를 남성/여성으로 이루어진 누적 막대 도표로 그릴 수 있다. 이 경우에는 하나의 막대 그래프 안에 2개의 숫자만
    들어가기 때문에 y축을 없애고 도표 안에 숫자를 넣어서 더욱 간결하게 그릴 수도 있다.
13. 막대 도표로 요점을 전달하기 힘든 경우에는 점 도표, 히트맵을 사용하여 표현할 수 있다.
    각 나라의 인구(범주 2개)를 막대 그래프로 그리면 각 나라간 차이가 두드러지지 않아서 보기가 힘든데 이때 점 도표를 사용할 수 있다.
    만약 각 나라의 연도별 인터넷 보급률(범주 3개)을 표현하려면 히트맵(기간 : x, 국가 : y, 보급률 : 색상)을 사용하는 것이 효과적이다.

# 데이터 분포의 시각화 : 히스토그램, 밀도 도표, 누적 분포 함수, QQ 도표
14. 데이터를 구간별로 나눠서 표시하는 시각화 방식을 히스토그램이라고 한다. 히스토그램의 모든 구간의 폭은 같으며
    구간의 폭을 데이터를 잘 표시할 수 있는 값으로 정하는 것이 중요하다. 최근에는 가우시안 커널을 활용한
    밀도 도표를 그리는 추세이며 밀도 도표는 히스토그램을 곡선으로 부드럽게 이은 버전이라고 생각하면 된다.
    밀도 도표의 대역폭 또한 히스토그램의 구간 폭처럼 여러 값으로 실험해보아야 하며 도표의 양쪽 끝단에
    데이터가 존재할 수 없는 영역까지 분포 곡선이 뻗어있지 않은지 확인해보아야 한다.
15. 둘 이상의 분포를 누적 히스토그램이나 중첩 히스토그램으로 표현할 수 있지만 이는 데이터를 파악하기 어렵게 한다
    이때 중첩 밀도 도표를 사용하면 4~5개의 분포도 적절하게 시각화할 수 있다.
